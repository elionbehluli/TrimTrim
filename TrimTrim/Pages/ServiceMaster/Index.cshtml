@page
@model TrimTrim.Pages.ServiceMaster.IndexModel


<div class="container">

    <!-- Search form with custom styling -->
    <form method="post" class="search-form">
        <div class="form-group search-input">
            <label for="SearchTerm">Search:</label>
            <input type="text" asp-for="Search.SearchTerm" class="form-control" />
        </div>
        <div class="form-group search-input">
            <label for="MinPrice">Minimum Price:</label>
            <input type="number" asp-for="Search.MinPrice" class="form-control" />
        </div>
        <button type="submit" class="btn btn-light search-button">Search</button>

        <!-- Add a link or button for sorting by Price -->
        <a asp-page="./Index" asp-route-sort="Price" asp-route-sortOrder="Ascending" class="btn btn-light search-button">Sort by Lowest Price</a>
        <a asp-page="./Index" asp-route-sort="Price" asp-route-sortOrder="Descending" class="btn btn-light search-button">Sort by Highest Price</a>

    </form>

    <h2>Services</h2>

    @if (User.IsInRole("Admin"))
    {
        <p class="create-new-link">
            <a asp-page="./Create">Create New</a>
        </p>
    }

    <!-- Table with custom styling -->
    <div class="container" style="background-color: white; padding: 20px;">
    <table class="table service-table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Service.Items[0].Name)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Service.Items[0].Price)
                </th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var service in Model.Service.Items)
            {
                <tr>
                    <td>
                        @service.Name
                    </td>
                    <td>
                        @service.Price
                    </td>
                    <td>
                        <a asp-page="./Details" asp-route-id="@service.Id">Details</a>
                        @if (User.IsInRole("Admin"))
                        {
                            <a asp-page="./Edit" asp-route-id="@service.Id">Edit</a>
                            <a asp-page="./Delete" asp-route-id="@service.Id">Delete</a>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>
    </div>
    <div class="pagination" style="margin-bottom:auto">
        <nav aria-label="Page navigation">
            <ul class="pagination">
                <li class="page-item @(Model.Service.PageIndex == 1 ? "disabled" : "")">
                    <a class="page-link" asp-page="./Index" asp-route-pageIndex="@(Model.Service.PageIndex - 1)" asp-route-sort="@ViewData["Sort"]" asp-route-sortOrder="@ViewData["SortOrder"]">&laquo; Previous</a>
                </li>
                @for (int i = 1; i <= Model.Service.TotalPages; i++)
                {
                    <li class="page-item @(i == Model.Service.PageIndex ? "active" : "")">
                        <a class="page-link" asp-page="./Index" asp-route-pageIndex="@i" asp-route-sort="@ViewData["Sort"]" asp-route-sortOrder="@ViewData["SortOrder"]">@i</a>
                    </li>
                }
                <li class="page-item @(Model.Service.PageIndex == Model.Service.TotalPages ? "disabled" : "")">
                    <a class="page-link" asp-page="./Index" asp-route-pageIndex="@(Model.Service.PageIndex + 1)" asp-route-sort="@ViewData["Sort"]" asp-route-sortOrder="@ViewData["SortOrder"]">Next &raquo;</a>
                </li>
            </ul>
        </nav>
    </div>

</div>
<link rel="stylesheet" href="~/css/SearchForm.css" />
